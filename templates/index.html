<!---
This is the HTML file that displays your landing page using vue.js
--->
{% extends "base.html" %}

{% block title %}
Vue.js Landing Page
{% endblock %}


{% block start_script %}
<script>
    var js_result_1 = '{{result_1}}'
    var js_result_2 = '{{result_2}}'
    var js_result_3 = '{{result_3}}'
</script>
<div id="data_result_1" style="display: none;">{{result_1}}</div>
{% endblock %}

<!--
██████╗  ██████╗ ██████╗ ██╗   ██╗
██╔══██╗██╔═══██╗██╔══██╗╚██╗ ██╔╝
██████╔╝██║   ██║██║  ██║ ╚████╔╝ 
██╔══██╗██║   ██║██║  ██║  ╚██╔╝  
██████╔╝╚██████╔╝██████╔╝   ██║   
╚═════╝  ╚═════╝ ╚═════╝    ╚═╝   
-->
{% block content %}
    <section id="main" class="wrapper style1">
        <header class="major">
            <div class='container'>
                <h2> Contact Us </h2>
            </div>
        </header>
        <div class='container'>
        <div id='app'>  <!-- id = 'app' is crutial -->
            <div align='center'>   
                <h1>Please enter a message and parameters</h1>
                <form id="myform" method="POST" action="">
                    <div class="row">
                        <div class="4u">
                            <div v-if="account_names" class="select-wrapper">
                                <select v-model="current_account" @change="current_account = $event.target.value; update_current_transaction()">
                                    <option>-</option>
                                    <option v-for="account in Object.keys(account_names)" :value="account" :key="account">[[ account_names[account] ]] - [[account]]</option>
                                </select>
                            </div>
                        </div> 
                        <div class="4u">

                        </div> 
                    </div>
                    <br>
                    <div class="row">
                        <div class="4u">
                            <ul class="actions">
                                <li><a @click.prevent="prev_transaction()" class="button">Back</a></li>
                                <li><a @click.prevent="next_transaction()" class="button">Next</a></li>
                            </ul>
                        </div> 
                        <div class="8u table-wrapper">			
                            <table>
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Description</th>
                                        <th>Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-if="current_transaction">
                                        <td>[[current_transaction.date]]</td>
                                        <td>[[current_transaction.description]]</td>
                                        <td>[[current_transaction.amount]]</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div> 
                    <br> 
                    <div>
                        <ul v-if="movement_types" class="actions fit">
                            <li v-for="movement_type in movement_types"><a class="button fit" :class="[current_movement_type == movement_type ? 'special' : '']"  @click="current_movement_type = movement_type">[[movement_type]]</a></li>
                            <!--  -->
                        </ul>
                    </div>
                    <br>
                    <div>
                        <span style="font-size: 2em;">Text:</span>      
                        <input style="width: 30%;" type="text" name="user" placeholder="short description" v-model="short_description">
                    </div>
                    <br/>
                    <div>
                        <ul class="actions fit">
                            <li><a class="button fit" @click="reset_code()">clear code</a></li>
                            <li v-if="description_levels.level_1" >
                                <div class="select-wrapper">
                                    <select v-model="selected_code[0]" @change="set_description($event.target.value, 0)">
                                        <option>-</option>
                                        <option v-for="code in Object.keys(description_levels.level_1)" :value="code" key="code">[[code]] - [[description_levels.level_1[code].description]]</option>
                                    </select>
                                </div>
                            </li>
                            <li v-if="description_levels.level_2"  v-for="level_index in (level_depth - 1)"> <!--- Object.keys(description_levels.level_2).length"> --->
                                <div v-if="selected_levels[level_index] && (Object.keys(selected_levels[level_index]).length > 0)" class="select-wrapper">
                                    <select name="category" id="category" v-model="selected_code[level_index]" @change="set_description($event.target.value, level_index)">
                                        <option>-</option>
                                        <option v-for="code in Object.keys(selected_levels[level_index])" :value="code" key="code">[[code]] - [[selected_levels[level_index][code].description]]</option>
                                    </select>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="center">			
                        <table>
                            <thead>
                                <tr>
                                    <th>Movement</th>
                                    <th>Amount</th>
                                    <th>Where</th>
                                    <th>Why</th>
                                    <th>Description</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-if="current_transaction">
                                    <td>[[current_movement_type]]</td>
                                    <td>[[current_transaction.amount]]</td>
                                    <td>[[ account_names[current_account] ]]</td>
                                    <td>[[calculate_initial_code]]</td>
                                    <td>[[short_description]]</td>
                                    <td>[[current_transaction.date]]</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <!-- <p>Age: [[data.age ]]</p> -->
                    </div>
                    <br/>
                    <div class="center">
                        <a class="button fit" name="Submit" @click.prevent="submit_transaction()">commit</a>
                    </div>
                    <div>
                        [[current_transaction]]
                    </div>
                </form>  
            </div>
        </div>
    </div>
{% endblock %}

{% block end_script %}
<!-- Include main.js from static directory -->
<script type="module" src="/static/main.js"></script>
</script>


{% endblock %}